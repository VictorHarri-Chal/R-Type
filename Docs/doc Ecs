ECS

Getting started


First, you have to create a rtype::ecs::entity::Entity object. It will represent the object that contains all your componenent.

A Entity have 5 methodes :

- bool hasCompoType(rtype::ecs::component::compoType type); Check if the entity have a component of the given type.
- void addComponent(component::compoType type, Args... args); Add component to entity.
- void remove(rtype::ecs::component::compoType type); Remove component to entity.
- T *getComponent(rtype::ecs::component::compoType type); Get the Component of the given type.
- rtype::ecs::entity::entityType getEntityType() const; Get the Entity Type

Components definition :


A Component must inherite from IComponent and have a method rtype::ecs::component::compoType getType() const ->

class ExampleComponent : public IComponent {
    public:
    ExampleComponent();
    ~ExampleComponent();

    rtype::ecs::component::compoType getType() const;

    protected:
    private:
};

Example :


#include <iostream>
#include "Entity.hpp"
#include "IComponent.hpp"

int main()
{
    rtype::ecs::entity::Entity Player;
    
    Player.addComponent<rtype::ecs::component::Alive>(rtype::ecs::component::ALIVE, true);
    if (Player.hasCompoType(rtype::ecs::component::ALIVE))
        std::cout << "J'ai bien le composent alive" << std::endl;
    std::cout << "Hp = " << Player.getComponent<rtype::ecs::component::Alive>(rtype::ecs::component::ALIVE) ->getAlive() << std::endl;
    std::cout << "Je passe Alive a false" << std::endl;
    Player.getComponent<rtype::ecs::component::Alive>(rtype::ecs::component::compoType::ALIVE)->setAlive(false);
    std::cout << "Hp = " << Player.getComponent<rtype::ecs::component::Alive>(rtype::ecs::component::ALIVE) ->getAlive() << std::endl;
    std::cout << "J'essaye de rajouter un componeent Alive" << std::endl;
    Player.addComponent<rtype::ecs::component::Alive>(rtype::ecs::component::ALIVE, true);
    if (Player.hasCompoType(rtype::ecs::component::ALIVE))
        std::cout << "J'ai toujours le composent alive" << std::endl;
    Player.remove(rtype::ecs::component::compoType::ALIVE);
    std::cout << "J'ai remove le composent alive" << std::endl;
    if (Player.hasCompoType(rtype::ecs::component::ALIVE))
        std::cout << "J'ai toujours le composent alive" << std::endl;
    else
        std::cout << "J'ai plus le composent alive" << std::endl;
    std::cout << "J'ajouter un componeent Alive" << std::endl;
    Player.addComponent<rtype::ecs::component::Alive>(rtype::ecs::component::ALIVE, true);
    if (Player.hasCompoType(rtype::ecs::component::ALIVE))
        std::cout << "J'ai bien le composent alive" << std::endl;
    return 0;
}

Exit :

J'ai bien le composent alive
Hp = 1
Je passe Alive a false
Hp = 0
J'essaye de rajouter un componeent Alive
Component already exist
J'ai toujours le composent alive
J'ai remove le composent alive
J'ai plus le composent alive
J'ajouter un componeent Alive
J'ai bien le composent alive
